# è¡Œäº‘æ–‡æ¡£ - æ™ºèƒ½æ–‡æ¡£å¤„ç†å¹³å°

åŸºäºElectron + Vue.js + TipTapçš„AIé©±åŠ¨æ–‡æ¡£ç”Ÿæˆä¸ç¼–è¾‘æ¡Œé¢åº”ç”¨ã€‚

## é¡¹ç›®æ¦‚è¿°

è¡Œäº‘æ–‡æ¡£æ˜¯ä¸€æ¬¾é›†è‡ªç„¶è¯­è¨€ç†è§£ã€å†…å®¹ç”Ÿæˆã€å¤šè½®äº¤äº’ä¸å›¾åƒå¤„ç†äºä¸€ä½“çš„æ™ºèƒ½æ–‡æ¡£å¹³å°ï¼Œæ—¨åœ¨æä¾›é«˜æ•ˆã€ç²¾å‡†ä¸”çµæ´»çš„æ–‡æ¡£ä¸å›¾ç‰‡ç”Ÿæˆè§£å†³æ–¹æ¡ˆã€‚

## æŠ€æœ¯æ ˆ

### å‰ç«¯

- **Electron** - æ¡Œé¢åº”ç”¨æ¡†æ¶
- **Vue.js 3** - æ¸è¿›å¼JavaScriptæ¡†æ¶
- **TipTap** - å¯Œæ–‡æœ¬ç¼–è¾‘å™¨
- **Pinia** - çŠ¶æ€ç®¡ç†
- **TailwindCSS** - CSSæ¡†æ¶
- **Lucide Icons** - å›¾æ ‡åº“

### åç«¯

- **FastAPI** - Python Webæ¡†æ¶ (Flask 3.0)
- **SQLAlchemy** - ORMæ¡†æ¶
- **PyMySQL** - MySQLé©±åŠ¨
- **Flask-JWT-Extended** - JWTè®¤è¯
- **WebSocket** - å®æ—¶é€šä¿¡
- **LLM** - å¤§è¯­è¨€æ¨¡å‹ï¼ˆå†…å®¹ç”Ÿæˆï¼‰
- **RAG** - æ£€ç´¢å¢å¼ºç”Ÿæˆ

## æ ¸å¿ƒåŠŸèƒ½

### âœ… å·²å®ç°

1. **ç”¨æˆ·è®¤è¯ç³»ç»Ÿ** â­ æ–°å¢

   - ç²¾ç¾çš„ç™»å½•/æ³¨å†Œé¡µé¢
   - ç”¨æˆ·ä¸ªäººä¸­å¿ƒ
   - ä¿®æ”¹å¯†ç åŠŸèƒ½
   - ç”¨æˆ·å¤´åƒå’Œèœå•
   - å¼€å‘æ¨¡å¼ï¼ˆæ— éœ€åç«¯å³å¯æµ‹è¯•ï¼‰
2. **TipTapå¯Œæ–‡æœ¬ç¼–è¾‘å™¨**

   - æ’¤é”€/é‡åšåŠŸèƒ½ï¼ˆCtrl+Z / Ctrl+Yï¼‰â­ æ–°å¢
   - æ”¯æŒæ ‡é¢˜ã€ç²—ä½“ã€æ–œä½“ã€ä¸‹åˆ’çº¿ç­‰æ ¼å¼
   - æ”¯æŒæœ‰åº/æ— åºåˆ—è¡¨
   - æ”¯æŒæ’å…¥å›¾ç‰‡å’Œè¡¨æ ¼
3. **ææ–™ç®¡ç†**

   - ä¸Šä¼ å‚è€ƒææ–™ï¼ˆDOCXã€PDFã€TXTã€MDã€HTMLï¼‰
   - ææ–™åˆ—è¡¨å±•ç¤ºå’Œåˆ é™¤
4. **AIå¯¹è¯ç•Œé¢**

   - ä¸AIåŠ©æ‰‹å®æ—¶å¯¹è¯
   - æ¶ˆæ¯å†å²è®°å½•
5. **æ–‡æ¡£æ“ä½œ**

   - æ–°å»º/æ‰“å¼€/ä¿å­˜æ–‡æ¡£
   - JSONæ ¼å¼æ–‡æ¡£æ¨¡å‹
   - å†å²è®°å½•å’Œç‰ˆæœ¬æ§åˆ¶
6. **WebSocketé€šä¿¡**

   - ä¸åç«¯å®æ—¶é€šä¿¡
   - è‡ªåŠ¨é‡è¿æœºåˆ¶

### ğŸš§ å¾…å®ç°

1. **AIåŠŸèƒ½é›†æˆ**

   - åŸºäºææ–™çš„æ™ºèƒ½å†…å®¹ç”Ÿæˆ
   - å¤§çº²è‡ªåŠ¨ç”Ÿæˆ
   - å†…å®¹ä¼˜åŒ–å’Œæ¶¦è‰²
2. **æ–‡æ¡£å¯¼å‡º**

   - å¯¼å‡ºä¸ºWordï¼ˆ.docxï¼‰
   - å¯¼å‡ºä¸ºPDF
   - å¯¼å‡ºä¸ºLaTeX
   - å¯¼å‡ºä¸ºMarkdown
3. **å›¾è¡¨ç”Ÿæˆ**

   - æµç¨‹å›¾ï¼ˆMermaid.jsï¼‰
   - æ¶æ„å›¾ï¼ˆPlantUMLï¼‰
   - AIç”Ÿæˆå›¾ç‰‡
4. **é«˜çº§ç¼–è¾‘åŠŸèƒ½**

   - ååŒç¼–è¾‘
   - è¯„è®ºå’Œæ‰¹æ³¨
   - æ¨¡æ¿ç³»ç»Ÿ

## é¡¹ç›®ç»“æ„

```
é¸¿é›æ¯/
â”œâ”€â”€ backend/              # Pythonåç«¯æœåŠ¡
â”‚   â”œâ”€â”€ models/           # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ routes/           # APIè·¯ç”±
â”‚   â”œâ”€â”€ uploads/          # æ–‡ä»¶ä¸Šä¼ ç›®å½•
â”‚   â”œâ”€â”€ app.py            # åç«¯å…¥å£
â”‚   â”œâ”€â”€ config.py         # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ requirements.txt  # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ doc/                  # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ æ•°æ®åº“è¡¨è®¾è®¡æ–‡æ¡£.md # åŒ…å«æ•°æ®åº“åˆå§‹åŒ–SQL
â”‚   â””â”€â”€ ...
â”œâ”€â”€ frontend/             # å‰ç«¯é¡¹ç›® (Electron + Vue)
â”‚   â”œâ”€â”€ electron/         # Electronä¸»è¿›ç¨‹
â”‚   â”‚   â”œâ”€â”€ main.js
â”‚   â”‚   â””â”€â”€ preload.js
â”‚   â”œâ”€â”€ src/              # Vueæºä»£ç 
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ App.vue
â”‚   â”‚   â””â”€â”€ main.js
â”‚   â”œâ”€â”€ package.json      # å‰ç«¯é¡¹ç›®é…ç½®
â”‚   â”œâ”€â”€ vite.config.js
â”‚   â”œâ”€â”€ tailwind.config.js
â”‚   â””â”€â”€ index.html
â””â”€â”€ README.md             # é¡¹ç›®æ€»æ–‡æ¡£
```

## å¼€å‘æŒ‡å—

### å®‰è£…ä¾èµ–

```bash
npm install
```

### å¼€å‘æ¨¡å¼

å¯åŠ¨Viteå¼€å‘æœåŠ¡å™¨å’ŒElectronï¼š

```bash
npm run electron:dev
```

### æ„å»ºåº”ç”¨

```bash
npm run electron:build
```

### åç«¯å¼€å‘

#### 1. ç¯å¢ƒå‡†å¤‡

- Python 3.8+
- MySQL 8.0+

#### 2. å®‰è£…ä¾èµ–

```bash
cd backend
pip install -r requirements.txt
```

#### 3. æ•°æ®åº“é…ç½®

1. åˆ›å»ºæ•°æ®åº“ `xingyun` (utf8mb4)ã€‚
2. è¿è¡Œ `doc/æ•°æ®åº“è¡¨è®¾è®¡æ–‡æ¡£.md` ä¸­çš„ "4. åˆå§‹åŒ– SQL è„šæœ¬" éƒ¨åˆ†çš„ä»£ç åˆå§‹åŒ–è¡¨ç»“æ„ã€‚
3. ä¿®æ”¹ `backend/config.py` ä¸­çš„æ•°æ®åº“é…ç½®ï¼ˆå¦‚æœå¯†ç æˆ–ç«¯å£ä¸åŒï¼‰ï¼š

```python
DB_USER = os.environ.get('DB_USER', 'root')
DB_PASSWORD = os.environ.get('DB_PASSWORD', 'YourPassword')
```

#### 4. å¯åŠ¨åç«¯

```bash
cd backend
python app.py
```
åç«¯æœåŠ¡å°†å¯åŠ¨åœ¨ `http://127.0.0.1:5000`ã€‚

## æ ¸å¿ƒæ¦‚å¿µ

### 1. JSONæ–‡æ¡£æ¨¡å‹

æ•´ä¸ªæ–‡æ¡£ä»¥JSONæ ¼å¼ä½œä¸ºå”¯ä¸€çœŸå®æ•°æ®æºï¼Œæ‰€æœ‰æ“ä½œéƒ½æ˜¯å¯¹JSONç»“æ„çš„ä¿®æ”¹ã€‚

```json
{
  "type": "doc",
  "content": [
    {
      "type": "heading",
      "attrs": { "level": 1 },
      "content": [{ "type": "text", "text": "æ ‡é¢˜" }]
    },
    {
      "type": "paragraph",
      "content": [{ "type": "text", "text": "æ®µè½å†…å®¹" }]
    }
  ]
}
```

### 2. AIä¸“å®¶å›¢é˜Ÿ

é‡‡ç”¨å¤šä¸ªä¸“ä¸šAIè§’è‰²ååŒå·¥ä½œï¼Œè€Œéå•ä¸€AIæ¨¡å‹ï¼š

- **AIæ€»æŒ‡æŒ¥** - ä»»åŠ¡è°ƒåº¦å’ŒæŒ‡ä»¤åˆ†å‘
- **å†…å®¹ç”Ÿæˆä¸“å®¶** - æ–‡æ¡£å†…å®¹åˆ›ä½œ
- **æ ¼å¼ä¸“å®¶** - æ–‡æ¡£æ’ç‰ˆå’Œç¾åŒ–
- **å›¾è¡¨ä¸“å®¶** - å›¾è¡¨ç”Ÿæˆå’Œä¼˜åŒ–

### 3. WebSocketé€šä¿¡

å‰ç«¯é€šè¿‡WebSocketä¸åç«¯FastAPIæœåŠ¡å®æ—¶é€šä¿¡ï¼š

```javascript
// å‘é€æ¶ˆæ¯åˆ°åç«¯
wsService.send({
  type: 'chat',
  message: 'å¸®æˆ‘ç”Ÿæˆä¸€ä»½é¡¹ç›®æŠ¥å‘Š',
  context: {
    document: editorJSON,
    materials: uploadedFiles
  }
})

// æ¥æ”¶åç«¯å“åº”
wsService.on('message', (data) => {
  if (data.type === 'document_update') {
    editor.commands.setContent(data.content)
  }
})
```

## åç«¯æ¥å£è¯´æ˜

åç«¯éœ€è¦å®ç°ä»¥ä¸‹WebSocketæ¥å£ï¼š

### è¿æ¥

```
ws://localhost:8000/ws
```

### æ¶ˆæ¯æ ¼å¼

#### å®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨

```json
{
  "type": "chat|generate|optimize",
  "message": "ç”¨æˆ·æ¶ˆæ¯",
  "context": {
    "document": {},
    "materials": []
  }
}
```

#### æœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯

```json
{
  "type": "chat_response|document_update|error",
  "content": "å“åº”å†…å®¹æˆ–æ–‡æ¡£JSON",
  "metadata": {}
}
```

## è´¡çŒ®æŒ‡å—

1. Forkæœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯Pull Request

## è®¸å¯è¯

MIT License

## è”ç³»æ–¹å¼

é¡¹ç›®é“¾æ¥: [https://github.com/yourusername/xingyun-doc-platform](https://github.com/yourusername/xingyun-doc-platform)
